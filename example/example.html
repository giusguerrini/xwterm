<!DOCTYPE html>
<html>
<head>
<style type="text/css">
        table {
            border-collapse: collapse;
            width: 80%;
            margin: 20px auto;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2; 
        }
</style>
</head>
<body>
	<script src="./wsrecv.js"></script>
	<button onclick="WebSocketExample()">WebSocket</button>
	<div>
		<textarea id="fromweb" rows="4" cols="50" readonly>
(from WebSocket)
		</textarea>
	<div>
	<table>
		<thead>
			<tr>
				<th>XWterm version</th>
				<th>Title</th>
				<th>Connected</th>
				<th>Frozen</th>
				<th>Bytes pending</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td id="version"></td>
				<td id="title"></td>
				<td id="connected"></td>
				<td id="frozen"></td>
				<td id="bytes"></td>
			</tr>
		</tbody>
	</table>
</body>
<script type="module">
import { AnsiTerm } from "./xwterm.js";
var ansi = new AnsiTerm( 
/* Zero-effort: Nothing at all, if you want the program to create a div for you  and apply default properties*/

		/* User-provided div:
		"mydiv"
		*/
		
		/* Changing size:
		*/
		{
		//canvasId: "mycanvas",
		nLines : 40,
		nColumns : 120,
		fontSize : 12,
		hasTitleBar: false,
		//hasStatusBar: false,
		hasSoftFKeys: false,
		}

		/* Chaning some more properties:
		{
		"nLines" : 40,
		"nColumns" : 120,
		"fontSize" : 13, //15
		"font" : "Courier New",
		"immediateRefresh" : 70,
		"fastRefresh" : 500,
		"slowRefresh" : 2000,
		}
		*/
	);
	
	document.getElementById("version").innerText = AnsiTerm.getVersion();
	ansi.registerOnTitleChange((t) => {
		document.getElementById("title").innerText = t;
	});
	ansi.registerOnStatusChange((connected) => {
		document.getElementById("connected").innerText = connected ? "yes" : "no";
	});
	ansi.registerOnFreezeChange((frozen, nbytes) => {
		document.getElementById("frozen").innerText = frozen ? "yes" : "no";
		document.getElementById("bytes").innerText = nbytes;
	});
</script>
</html>
